<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Open source weather station C# mqtt: MQTTbrokerTTNtoDB.Program Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Open source weather station C# mqtt
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespace_m_q_t_tbroker_t_t_nto_d_b.html">MQTTbrokerTTNtoDB</a></li><li class="navelem"><a class="el" href="class_m_q_t_tbroker_t_t_nto_d_b_1_1_program.html">Program</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pri-static-methods">Static Private Member Functions</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="class_m_q_t_tbroker_t_t_nto_d_b_1_1_program-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">MQTTbrokerTTNtoDB.Program Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Main class of the program. In this class the mqtt broker will created.  
 <a href="class_m_q_t_tbroker_t_t_nto_d_b_1_1_program.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a334e0ed52c8e64787ec740852dcae6f4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_m_q_t_tbroker_t_t_nto_d_b_1_1_program.html#a334e0ed52c8e64787ec740852dcae6f4">DecodeSensorData</a> (string EncodedData, string macAddress, DateTime time)</td></tr>
<tr class="memdesc:a334e0ed52c8e64787ec740852dcae6f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">With this function the raw data will be decoded. After that the data will be passed to another function which sends the data to the databases.  <a href="#a334e0ed52c8e64787ec740852dcae6f4">More...</a><br /></td></tr>
<tr class="separator:a334e0ed52c8e64787ec740852dcae6f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-methods"></a>
Static Private Member Functions</h2></td></tr>
<tr class="memitem:a3834c352b38865cd68954b2b9195f423"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_m_q_t_tbroker_t_t_nto_d_b_1_1_program.html#a3834c352b38865cd68954b2b9195f423">Main</a> (string[] args)</td></tr>
<tr class="memdesc:a3834c352b38865cd68954b2b9195f423"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is the start of the program. It will create connections to the database. After that it will connect to the mqtt broker of The Things Network. Once connected it will subscribe to an event.  <a href="#a3834c352b38865cd68954b2b9195f423">More...</a><br /></td></tr>
<tr class="separator:a3834c352b38865cd68954b2b9195f423"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91cdec1dce714be476133154462d243f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_m_q_t_tbroker_t_t_nto_d_b_1_1_program.html#a91cdec1dce714be476133154462d243f">Client_MqttMsgPublishReceived</a> (object sender, MqttMsgPublishEventArgs e)</td></tr>
<tr class="memdesc:a91cdec1dce714be476133154462d243f"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is called when a message is recieved on the mqtt broker. It wil than pass important data to function that will decode it to readable data. Data that will be send: payload_raw, hardware_serial(device_eui) and the time of receiving.  <a href="#a91cdec1dce714be476133154462d243f">More...</a><br /></td></tr>
<tr class="separator:a91cdec1dce714be476133154462d243f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b211d9a14eb47d76ec9d9a037babe6b"><td class="memItemLeft" align="right" valign="top">static async Task&lt; uint &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_m_q_t_tbroker_t_t_nto_d_b_1_1_program.html#a7b211d9a14eb47d76ec9d9a037babe6b">getDeviceId</a> (string macAddress)</td></tr>
<tr class="memdesc:a7b211d9a14eb47d76ec9d9a037babe6b"><td class="mdescLeft">&#160;</td><td class="mdescRight">With this function the device-id wil be returned that is connected to the given mac address.  <a href="#a7b211d9a14eb47d76ec9d9a037babe6b">More...</a><br /></td></tr>
<tr class="separator:a7b211d9a14eb47d76ec9d9a037babe6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab698bda537c173be76eb8f06900dc4ff"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_m_q_t_tbroker_t_t_nto_d_b_1_1_program.html#ab698bda537c173be76eb8f06900dc4ff">Client_MqttMsgSubscribed</a> (object sender, MqttMsgSubscribedEventArgs e)</td></tr>
<tr class="memdesc:ab698bda537c173be76eb8f06900dc4ff"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function will simple print the message from the mqtt broker once there is a message.  <a href="#ab698bda537c173be76eb8f06900dc4ff">More...</a><br /></td></tr>
<tr class="separator:ab698bda537c173be76eb8f06900dc4ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afddf61a59411ba748ddb78ca573e166c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_m_q_t_tbroker_t_t_nto_d_b_1_1_program.html#afddf61a59411ba748ddb78ca573e166c">Client_ConnectionClosed</a> (object sender, EventArgs e)</td></tr>
<tr class="memdesc:afddf61a59411ba748ddb78ca573e166c"><td class="mdescLeft">&#160;</td><td class="mdescRight">When the connection to the broker closed this function will print a message.  <a href="#afddf61a59411ba748ddb78ca573e166c">More...</a><br /></td></tr>
<tr class="separator:afddf61a59411ba748ddb78ca573e166c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:ae3dafe77619b51b59e9425ef72abdb47"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="class_m_q_t_tbroker_t_t_nto_d_b_1_1_manage_d_b.html">ManageDB</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_m_q_t_tbroker_t_t_nto_d_b_1_1_program.html#ae3dafe77619b51b59e9425ef72abdb47">manageDB</a></td></tr>
<tr class="memdesc:ae3dafe77619b51b59e9425ef72abdb47"><td class="mdescLeft">&#160;</td><td class="mdescRight">Variable that manage the Influx database.  <a href="#ae3dafe77619b51b59e9425ef72abdb47">More...</a><br /></td></tr>
<tr class="separator:ae3dafe77619b51b59e9425ef72abdb47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3e2d9b4d875bf614aeff78d5e2741cc"><td class="memItemLeft" align="right" valign="top">static MySqlConnection&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_m_q_t_tbroker_t_t_nto_d_b_1_1_program.html#ae3e2d9b4d875bf614aeff78d5e2741cc">connection</a></td></tr>
<tr class="memdesc:ae3e2d9b4d875bf614aeff78d5e2741cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Variable that manage MySql database.  <a href="#ae3e2d9b4d875bf614aeff78d5e2741cc">More...</a><br /></td></tr>
<tr class="separator:ae3e2d9b4d875bf614aeff78d5e2741cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Main class of the program. In this class the mqtt broker will created. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="afddf61a59411ba748ddb78ca573e166c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afddf61a59411ba748ddb78ca573e166c">&#9670;&nbsp;</a></span>Client_ConnectionClosed()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void MQTTbrokerTTNtoDB.Program.Client_ConnectionClosed </td>
          <td>(</td>
          <td class="paramtype">object&#160;</td>
          <td class="paramname"><em>sender</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">EventArgs&#160;</td>
          <td class="paramname"><em>e</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>When the connection to the broker closed this function will print a message. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sender</td><td></td></tr>
    <tr><td class="paramname">e</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a91cdec1dce714be476133154462d243f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91cdec1dce714be476133154462d243f">&#9670;&nbsp;</a></span>Client_MqttMsgPublishReceived()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void MQTTbrokerTTNtoDB.Program.Client_MqttMsgPublishReceived </td>
          <td>(</td>
          <td class="paramtype">object&#160;</td>
          <td class="paramname"><em>sender</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MqttMsgPublishEventArgs&#160;</td>
          <td class="paramname"><em>e</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function is called when a message is recieved on the mqtt broker. It wil than pass important data to function that will decode it to readable data. Data that will be send: payload_raw, hardware_serial(device_eui) and the time of receiving. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sender</td><td>The sender object.</td></tr>
    <tr><td class="paramname">e</td><td>The object that includes the message.</td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab698bda537c173be76eb8f06900dc4ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab698bda537c173be76eb8f06900dc4ff">&#9670;&nbsp;</a></span>Client_MqttMsgSubscribed()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void MQTTbrokerTTNtoDB.Program.Client_MqttMsgSubscribed </td>
          <td>(</td>
          <td class="paramtype">object&#160;</td>
          <td class="paramname"><em>sender</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MqttMsgSubscribedEventArgs&#160;</td>
          <td class="paramname"><em>e</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function will simple print the message from the mqtt broker once there is a message. </p>

</div>
</div>
<a id="a334e0ed52c8e64787ec740852dcae6f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a334e0ed52c8e64787ec740852dcae6f4">&#9670;&nbsp;</a></span>DecodeSensorData()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void MQTTbrokerTTNtoDB.Program.DecodeSensorData </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>EncodedData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>macAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DateTime&#160;</td>
          <td class="paramname"><em>time</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>With this function the raw data will be decoded. After that the data will be passed to another function which sends the data to the databases. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">EncodedData</td><td>The raw payload.</td></tr>
    <tr><td class="paramname">macAddress</td><td>Mac address of the device.</td></tr>
    <tr><td class="paramname">time</td><td>Time data has been send.</td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7b211d9a14eb47d76ec9d9a037babe6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b211d9a14eb47d76ec9d9a037babe6b">&#9670;&nbsp;</a></span>getDeviceId()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static async Task&lt;uint&gt; MQTTbrokerTTNtoDB.Program.getDeviceId </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>macAddress</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>With this function the device-id wil be returned that is connected to the given mac address. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">macAddress</td><td>Mac address of the device.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>id of the device within the database.</dd></dl>

</div>
</div>
<a id="a3834c352b38865cd68954b2b9195f423"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3834c352b38865cd68954b2b9195f423">&#9670;&nbsp;</a></span>Main()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void MQTTbrokerTTNtoDB.Program.Main </td>
          <td>(</td>
          <td class="paramtype">string []&#160;</td>
          <td class="paramname"><em>args</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function is the start of the program. It will create connections to the database. After that it will connect to the mqtt broker of The Things Network. Once connected it will subscribe to an event. </p>
<p>Every time data is uploaded to The Things Network, to this application-id, that data is send to de databases. </p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ae3e2d9b4d875bf614aeff78d5e2741cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3e2d9b4d875bf614aeff78d5e2741cc">&#9670;&nbsp;</a></span>connection</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">MySqlConnection MQTTbrokerTTNtoDB.Program.connection</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Variable that manage MySql database. </p>

</div>
</div>
<a id="ae3dafe77619b51b59e9425ef72abdb47"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3dafe77619b51b59e9425ef72abdb47">&#9670;&nbsp;</a></span>manageDB</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_m_q_t_tbroker_t_t_nto_d_b_1_1_manage_d_b.html">ManageDB</a> MQTTbrokerTTNtoDB.Program.manageDB</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Variable that manage the Influx database. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>C:/Users/dorth/Documents/Visual Studio 2017/Projects/MQTTbrokerTTNtoDB/MQTTbrokerTTNtoDB/Program.cs</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
